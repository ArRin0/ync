{"remainingRequest":"D:\\github\\java\\ync\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\github\\java\\ync\\src\\pages\\visitor\\index.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\github\\java\\ync\\src\\pages\\visitor\\index.vue","mtime":1594651708786},{"path":"D:\\github\\java\\ync\\node_modules\\css-loader\\index.js","mtime":1594540098871},{"path":"D:\\github\\java\\ync\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1594540112417},{"path":"D:\\github\\java\\ync\\node_modules\\postcss-loader\\src\\index.js","mtime":1594540108190},{"path":"D:\\github\\java\\ync\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594540095964},{"path":"D:\\github\\java\\ync\\node_modules\\vue-loader\\lib\\index.js","mtime":1594540112414}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.session-main-body {\n\tmargin: auto;\n\tpadding-top: 1px;\n\tpadding-bottom: 76px;\n\twidth: 700px;\n\tborder-right: 2px solid rgba(242, 242, 242, 0.498);\n\tbackground-color: white;\n}\n\n.title{\n\ttext-align: center;\n\tmargin: 20px;\n}\n\n.session-main-body .session-window {\n\tbackground-color: rgba(242, 242, 242, 0.6);\n\theight: 460px;\n\tpadding: 50px 20px;\n\toverflow-x: scroll;\n}\n.session-main-body .session-window::-webkit-scrollbar{\n\tdisplay: none;\n}\n\n.session-main-body .session-input {\n\theight: 147px;\n}\n\n.session-body .session-util-tab {\n\twidth: 340px;\n}\n\n.session-window .session-msg {\n\tdisplay: flex;\n}\n\n.session-msg .user-img {\n\twidth: 40px;\n\theight: 40px;\n\tline-height: 40px;\n\tborder-radius: 50%;\n\ttext-align: center;\n\tbackground-color: #006EFF;\n\tcolor: #FFFFFF;\n\tmargin-right: 10px;\n\tmargin-left: 0px;\n}\n\n.session-msg.receiver .user-img {\n\tmargin-right: 0px;\n\tmargin-left: 10px;\n}\n\n.session-msg .msg-detail {\n\tmax-width: 80%;\n}\n\n.session-msg .msg-title {\n\tcolor: #aeaeae;\n\tmargin-bottom: 6px;\n}\n\n.session-msg .msg-content {\n\tpadding: 10px 12px;\n\tbackground-color: #fff;\n\tbox-shadow: rgb(204, 204, 204) 0px 0px 5px 0px;\n\tborder-radius: 4px;\n\tmargin-bottom: 20px;\n}\n\n.session-msg.receiver {\n\tflex-direction: row-reverse;\n}\n\n.session-input {\n\tpadding-left: 10px;\n}\n\n.session-input .icon-img {\n\theight: 30px;\n\tline-height: 30px;\n\tmargin-bottom: 12px;\n}\n\n.session-input .icon-img i {\n\tfont-size: 20px;\n\tcolor: rgba(0, 0, 0, .6);\n}\n\n.session-input .icon-img span {\n\tmargin-right: 23px;\n}\n\n.session-input .input-box {\n\theight: 120px;\n}\n\n.input-box textarea {\n\theight: 100%;\n\twidth: 100%;\n\tborder-style: none;\n}\n.input-box textarea:focus{\n\toutline: none;\n}\n\n.input-btn {\n\ttext-align: right;\n}\n\n.input-btn button {\n\tbackground-color: #006EFF;\n\tcolor: #fff;\n\tborder-style: none;\n\tmargin-right: 16px;\n\tmargin-top: 6px;\n\twidth: 100px;\n\theight: 40px;\n\tborder-radius: 4px;\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/visitor","sourcesContent":["<template>\r\n\t<div class=\"session-main-body\">\r\n\t\t\t<div class=\"title\"><h3>七尾~在线客服</h3></div>\r\n\t\t\t<div class=\"session-window\">\r\n\t\t\t\t<div class=\"session-msg sender\">\r\n\t\t\t\t\t<div class=\"user-img\">\r\n\t\t\t\t\t\t<i class=\"iconfont icon-beizit\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"msg-detail\">\r\n\t\t\t\t\t\t<div class=\"msg-title\">\r\n\t\t\t\t\t\t\t<span class=\"user-name\">客服1号</span>\r\n\t\t\t\t\t\t\t<span class=\"msg-time\">2020/06/09 20:09</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"msg-content\">您好，请问有什么可以帮您呢？您好，请问有什么可以帮您呢？您好，请问有什么可以帮您呢？您好，请问有什么可以帮您呢？您好，请问有什么可以帮您呢？您好，请问有什么可以帮您呢？</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"session-msg receiver\">\r\n\t\t\t\t\t<div class=\"user-img\">\r\n\t\t\t\t\t\t<i class=\"iconfont icon-beizit\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"msg-detail\">\r\n\t\t\t\t\t\t<div class=\"msg-title\">\r\n\t\t\t\t\t\t\t<span class=\"user-name\">北京客户</span>\r\n\t\t\t\t\t\t\t<span class=\"msg-time\">2020/06/09 20:09</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"msg-content\">您好，我想咨询下。。。？</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"session-msg receiver\">\r\n\t\t\t\t\t<div class=\"user-img\">\r\n\t\t\t\t\t\t<i class=\"iconfont icon-beizit\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"msg-detail\">\r\n\t\t\t\t\t\t<div class=\"msg-title\">\r\n\t\t\t\t\t\t\t<span class=\"user-name\">北京客户</span>\r\n\t\t\t\t\t\t\t<span class=\"msg-time\">2020/06/09 20:09</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"msg-content\">您好，我想咨询下。。。？您好，我想咨询下。。。？您好，我想咨询下。。。？您好，我想咨询下。。。？您好，我想咨询下。。。？您好，我想咨询下。。。？您好，我想咨询下。。。？您好，我想咨询下。。。？</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"session-msg receiver\">\r\n\t\t\t\t\t<div class=\"user-img\">\r\n\t\t\t\t\t\t<i class=\"iconfont icon-beizit\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"msg-detail\">\r\n\t\t\t\t\t\t<div class=\"msg-title\">\r\n\t\t\t\t\t\t\t<span class=\"user-name\">北京客户</span>\r\n\t\t\t\t\t\t\t<span class=\"msg-time\">2020/06/09 20:09</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"msg-content\">您好，我想咨询下。。。？</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"session-msg receiver\">\r\n\t\t\t\t\t<div class=\"user-img\">\r\n\t\t\t\t\t\t<i class=\"iconfont icon-beizit\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"msg-detail\">\r\n\t\t\t\t\t\t<div class=\"msg-title\">\r\n\t\t\t\t\t\t\t<span class=\"user-name\">北京客户</span>\r\n\t\t\t\t\t\t\t<span class=\"msg-time\">2020/06/09 20:09</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"msg-content\">您好，我想咨询下。。。？</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"session-msg receiver\">\r\n\t\t\t\t\t<div class=\"user-img\">\r\n\t\t\t\t\t\t<i class=\"iconfont icon-beizit\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"msg-detail\">\r\n\t\t\t\t\t\t<div class=\"msg-title\">\r\n\t\t\t\t\t\t\t<span class=\"user-name\">北京客户</span>\r\n\t\t\t\t\t\t\t<span class=\"msg-time\">2020/06/09 20:09</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"msg-content\">您好，我想咨询下。。。？</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"session-input\">\r\n\t\t\t\t<div class=\"icon-img\">\r\n\t\t\t\t\t<span class=\"icon\"><i class=\"iconfont icon-xiaolian1\"></i></span>\r\n\t\t\t\t\t<span class=\"file\"><i class=\"iconfont icon-tupian\"></i></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"input-box\">\r\n\t\t\t\t\t<textarea id=\"msg\" placeholder=\"请输入内容\">\r\n\t\t\r\n\t\t\t\t\t</textarea>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"input-btn\">\r\n\t\t\t\t\t<button type=\"button\">发送</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport UaParser from 'ua-parser-js';\r\n\texport default{\r\n\t\tname:\"GVisitor\",\r\n\t\tdata:function(){\r\n\t\t\treturn {\r\n\t\t\t\tsocket:null,\r\n\t\t\t\tuserId:null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tinitWebsocket:function(){\r\n\t\t\t\t\tif(typeof(WebSocket) == \"undefined\") {\r\n\t\t\t\t\t    console.log(\"您的浏览器不支持WebSocket\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t    console.log(\"您的浏览器支持WebSocket\");\r\n\t\t\t\t\t    //实现化WebSocket对象，指定要连接的服务器地址与端口  建立连接\r\n\t\t\t\t\t    var userId = JSON.parse(localStorage.getItem(\"user\")).id;\r\n\t\t\t\t\t    var socketUrl=\"ws://localhost:8080/ccs/webSocket/\"+userId;\r\n\t\t\t\t\t    // var socketUrl=\"ws://192.168.0.231:22599/webSocket/\"+userId;\r\n\t\t\t\t\t    console.log(socketUrl);\r\n\t\t\t\t\t    if(this.socket!=null){\r\n\t\t\t\t\t        this.socket.close();\r\n\t\t\t\t\t        this.socket=null;\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t    this.socket = new WebSocket(socketUrl);\r\n\t\t\t\t\t    //打开事件\r\n\t\t\t\t\t    this.socket.onopen = function() {\r\n\t\t\t\t\t        console.log(\"websocket已打开\");\r\n\t\t\t\t\t        //socket.send(\"这是来自客户端的消息\" + location.href + new Date());\r\n\t\t\t\t\t    };\r\n\t\t\t\t\t    //获得消息事件\r\n\t\t\t\t\t    this.socket.onmessage = function(msg) {\r\n\t\t\t\t\t        //当接收到websocket服务器发送当消息当时候，判断消息是会话列表有更新还是会话消息有更新，更新对应当子组件\r\n\t\t\t\t\t    };\r\n\t\t\t\t\t    //关闭事件\r\n\t\t\t\t\t    this.socket.onclose = function() {\r\n\t\t\t\t\t        console.log(\"websocket已关闭\");\r\n\t\t\t\t\t    };\r\n\t\t\t\t\t    //发生了错误事件\r\n\t\t\t\t\t    this.socket.onerror = function() {\r\n\t\t\t\t\t        console.log(\"websocket发生了错误\");\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\tgetId:function(){\r\n\t\t\t\t// 将客户端信息：IP,客户名称，浏览器，屏幕尺寸，设备等信息提交给服务器，服务器返回当前的访客 id\r\n\t\t\t\t let ip = localStorage.getItem(\"ip\");\r\n\t\t\t\t let visitor_name = localStorage.getItem(\"cname\");\r\n\t\t\t\t \r\n\t\t\t\t let uaParser = new UaParser();\r\n\t\t\t\t let uaInfo = uaParser.getResult();\r\n\t\t\t\t let browser = uaInfo.browser.name;\r\n\t\t\t\t let screenSize = `${window.screen.width}px,${window.screen.height}px`;\r\n\t\t\t\t let params = {\r\n\t\t\t\t\t ip,\r\n\t\t\t\t\t visitor_name,\r\n\t\t\t\t\t browser,\r\n\t\t\t\t\t screenSize\r\n\t\t\t\t }\r\n\t\t\t\t this.$axios\r\n\t\t\t\t .post('/visitor/save',params)//将封装好的参数提交至后端\r\n\t\t\t\t .then(resp=>{\r\n\t\t\t\t\t let {data} = resp;\r\n\t\t\t\t\t this.userId = data.success?data.message:\"\";\r\n\t\t\t\t\t this.initWebsocket();\r\n\t\t\t\t })\r\n\t\t\t\t .catch(err=>{\r\n\t\t\t\t\t console.log(err)\r\n\t\t\t\t })\t \r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getId();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.session-main-body {\r\n\t\tmargin: auto;\r\n\t\tpadding-top: 1px;\r\n\t\tpadding-bottom: 76px;\r\n\t\twidth: 700px;\r\n\t\tborder-right: 2px solid rgba(242, 242, 242, 0.498);\r\n\t\tbackground-color: white;\r\n\t}\r\n\t\r\n\t.title{\r\n\t\ttext-align: center;\r\n\t\tmargin: 20px;\r\n\t}\r\n\t\r\n\t.session-main-body .session-window {\r\n\t\tbackground-color: rgba(242, 242, 242, 0.6);\r\n\t\theight: 460px;\r\n\t\tpadding: 50px 20px;\r\n\t\toverflow-x: scroll;\r\n\t}\r\n\t.session-main-body .session-window::-webkit-scrollbar{\r\n\t\tdisplay: none;\r\n\t}\r\n\t\r\n\t.session-main-body .session-input {\r\n\t\theight: 147px;\r\n\t}\r\n\t\r\n\t.session-body .session-util-tab {\r\n\t\twidth: 340px;\r\n\t}\r\n\t\r\n\t.session-window .session-msg {\r\n\t\tdisplay: flex;\r\n\t}\r\n\t\r\n\t.session-msg .user-img {\r\n\t\twidth: 40px;\r\n\t\theight: 40px;\r\n\t\tline-height: 40px;\r\n\t\tborder-radius: 50%;\r\n\t\ttext-align: center;\r\n\t\tbackground-color: #006EFF;\r\n\t\tcolor: #FFFFFF;\r\n\t\tmargin-right: 10px;\r\n\t\tmargin-left: 0px;\r\n\t}\r\n\t\r\n\t.session-msg.receiver .user-img {\r\n\t\tmargin-right: 0px;\r\n\t\tmargin-left: 10px;\r\n\t}\r\n\t\r\n\t.session-msg .msg-detail {\r\n\t\tmax-width: 80%;\r\n\t}\r\n\t\r\n\t.session-msg .msg-title {\r\n\t\tcolor: #aeaeae;\r\n\t\tmargin-bottom: 6px;\r\n\t}\r\n\t\r\n\t.session-msg .msg-content {\r\n\t\tpadding: 10px 12px;\r\n\t\tbackground-color: #fff;\r\n\t\tbox-shadow: rgb(204, 204, 204) 0px 0px 5px 0px;\r\n\t\tborder-radius: 4px;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\t\r\n\t.session-msg.receiver {\r\n\t\tflex-direction: row-reverse;\r\n\t}\r\n\t\r\n\t.session-input {\r\n\t\tpadding-left: 10px;\r\n\t}\r\n\t\r\n\t.session-input .icon-img {\r\n\t\theight: 30px;\r\n\t\tline-height: 30px;\r\n\t\tmargin-bottom: 12px;\r\n\t}\r\n\t\r\n\t.session-input .icon-img i {\r\n\t\tfont-size: 20px;\r\n\t\tcolor: rgba(0, 0, 0, .6);\r\n\t}\r\n\t\r\n\t.session-input .icon-img span {\r\n\t\tmargin-right: 23px;\r\n\t}\r\n\t\r\n\t.session-input .input-box {\r\n\t\theight: 120px;\r\n\t}\r\n\t\r\n\t.input-box textarea {\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t\tborder-style: none;\r\n\t}\r\n\t.input-box textarea:focus{\r\n\t\toutline: none;\r\n\t}\r\n\t\r\n\t.input-btn {\r\n\t\ttext-align: right;\r\n\t}\r\n\t\r\n\t.input-btn button {\r\n\t\tbackground-color: #006EFF;\r\n\t\tcolor: #fff;\r\n\t\tborder-style: none;\r\n\t\tmargin-right: 16px;\r\n\t\tmargin-top: 6px;\r\n\t\twidth: 100px;\r\n\t\theight: 40px;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n</style>\r\n"]}]}